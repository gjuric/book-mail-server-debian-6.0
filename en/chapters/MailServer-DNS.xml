<?xml version="1.0" encoding="UTF-8"?>
<section version="5.0" xml:id="dns"
         xmlns="http://docbook.org/ns/docbook"
         xmlns:xl="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:mml="http://www.w3.org/1998/Math/MathML"
         xmlns:html="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">
  <title>DNS settings</title>

  <note>
    <para>Mail server in this example is named <systemitem
    class="fqdomainname">atlantis.example.com</systemitem>. You can also name
    it <systemitem class="fqdomainname">mail.example.com</systemitem> if you
    like.</para>
  </note>

  <para>First, we need to check our hostname</para>

  <screen>atlantis:~# <command>hostname -f</command>
atlantis.diabmon.com </screen>

  <para>If hostname did not return FQDN of your server edit
  <filename>/etc/hosts</filename>. You <filename>hosts</filename> file should
  look something like this, if not, change according to your IP address and
  server name.</para>

  <programlisting>127.0.0.1       localhost
YOUR-IP-ADDRESS atlantis.example.com atlantis </programlisting>

  <para>Now check your <filename>/etc/hostname</filename> file it should
  contain your fully qualified domain name:</para>

  <programlisting>atlantis.example.com </programlisting>

  <para>Change the names to match your server name and reboot the server. Run
  <command>hostname -f</command> again and you should see <systemitem
  class="fqdomainname">atlantis.example.com</systemitem>.</para>

  <para>Now, we need to check that our DNS servers have an MX record for our
  <systemitem class="domainname">example.com</systemitem> domain. If you
  haven't done so already Install DNS utilities:</para>

  <programlisting>apt-get install dnsutils</programlisting>

  <para>We are going to use <command>host</command> command to check
  information about our domain:</para>

  <screen>atlantis:~# <command>host</command> example.com
example.com has address YOUR-IP-ADDRESS
example.com mail is handled by 0 mail.example.com. </screen>

  <para>We can see that the mail for our domain is handled by <systemitem
  class="fqdomainname">mail.example.com</systemitem>. Which server is supposed
  to handle mail for your domain is handled by the so called MX records in
  your domains zone file. Setting up DNS zone files is out of scope for this
  document.</para>

  <para>Now we must make sure that <systemitem
  class="fqdomainname">mail.example.com</systemitem> points to the same
  address as our server (<systemitem
  class="fqdomainname">atlantis.example.com</systemitem>).</para>

  <screen>atlantis:~# <command>nslookup</command> mail.example.com
Server: YOUR-DNS-SERVER
Address: YOUR-DNS-ADDRESS#53

Non-authoritative answer:
mail.example.com canonical name = atlantis.example.com.
Name: example.com
Address: YOUR-IP-ADDRESS </screen>

  <para>It would be also nice if your reverse DNS points to the same name
  (<systemitem class="fqdomainname">atlantis.example.com</systemitem>).</para>

  <screen>atlantis:~# <command>nslookup</command> YOUR-IP-ADDRESS
Server: YOUR-DNS-SERVER
Address: YOUR-DNS-SERVER#53

Non-authoritative answer: 
YOUR-IP-ADDRES-REVERSE.in-addr.arpa name = atlantis.example.com. </screen>

  <para>If they do not match you will probably have to ask your ISP to change
  this for you.</para>
</section>
